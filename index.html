<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>dataBase</title>
</head>

<body>
  <form>
    <ul>
      <li class="form-item" required>
        <label for="name">姓名</label>
        <input type="text" name="name" id="name" placeholder="陳小明">
      </li>
      <li class="form-item">
        <label for="email">信箱</label>
        <input type="email" name="email" id="email" placeholder="xxx@gmail.com">
      </li>
      <li class="form-item">
        <label for="password">密碼</label>
        <input type="password" name="password" id="password">
      </li>
      <li class="form-item">
        <label for="tel">電話</label>
        <input type="tel" name="tel" id="tel" placeholder="0912-345-678">
      </li>
      <li class="form-item">
        <label for="sex">性別</label>
      </li>
      <li class="form-item">
        <input type="radio" name="male" id="male" checked>男
        <input type="radio" name="female" id="female">女
      </li>
      <li class="form-item">
        <input type="submit" class="form-item" id="send" value="送出">
      </li>
    </ul>
  </form>
  <ul id="list">
  
  </ul>
  
  <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-database.js"></script>

  <script>
    const config = {
      apiKey: "AIzaSyCGC4ko6XLEurccnYf6pqS1CX728cebRTQ",
      authDomain: "project-a7b85.firebaseapp.com",
      projectId: "project-a7b85",
      storageBucket: "project-a7b85.appspot.com",
      messagingSenderId: "299340126979",
      appId: "1:299340126979:web:0e6dd564f9539d5f426736",
      measurementId: "G-P1E8XKP9E5"
    };
    // Initialize Firebase
    firebase.initializeApp(config);

    // Dom元素
    const name = document.querySelector('#name');
    const email = document.querySelector('#email');
    const password = document.querySelector('#password');
    const tel = document.querySelector('#tel');
    const sex = document.querySelector('#sex');
    const send = document.querySelector('#send');
    const list = document.querySelector('#list');

    // 連線到資料庫，其中的todos
    const todos = firebase.database().ref('todos');

    // 將表單內容，寫入資料庫
    send.addEventListener('click',(e)=>{
      // let data = {
      //   name: name.value,
      //   email: email.value,
      //   password: password.value,
      //   tel: tel.value,
      //   male: male.value,
      //   female: female.value,
      // }

      let data = {
        content: name.value,
        content: email.value,
        content: password.value,
        content: tel.value,
        content: male.value,
        content: female.value,
      }
      // console.log(data);
      todos.push(data);
    })

    // 顯示內容
    todos.on('value',(snapshot)=>{
      // console.log(snapshot.val());
      let str = "";
      let data = snapshot.val();
      for (let item in data){
        // console.log(item);
        str+=`
        <li>${data[item].content}</li>
        `
      }
      console.log(str);
      list.innerHTML = str;

    })


  </script>

</body>

</html>